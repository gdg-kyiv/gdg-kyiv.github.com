<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://datejs.googlecode.com/svn/trunk/build/date-en-GB.js"></script>
    <script src="data.js"></script>
    <script src="format.js"></script>
    <script src="util.js"></script>
    <script src="ui.js"></script>
    <script>
    	var TIME = 500;
    	
    	function createEvents(pageId) {
    		var pageElem = $('#container > .' + pageId);
    	
    		pageElem.data('events').each(function(i, event) {
    			var eventDiv, contentDiv, photosDiv;
    			pageElem.append(eventDiv = $('<div></div>').addClass('event')
    				.append(contentDiv = $('<div></div>')
    					.append($('<div></div>').addClass('fadeout'))
    					.append($('<div>' + formatDate(event) + '</div>').addClass('date'))
    					.append($('<div>' + event['title'] + '</div>').addClass('title'))
    					.append(photosDiv = $('<div></div>').addClass('photos').hide())
    				)
    			);
    			
    			if (event['description']) {
    				eventDiv.append($('<div>' + event['description'] + '</div>').addClass('description'));
    			}
    			
    			if (event['photos']) {
    				$(event['photos']).each(function(i, url) { photosDiv.append($('<img src="' + url + '">')); });
    				photosDiv.show();
    			}
    		});
    	}
    	
    	function createMembers() {
    		var pageElem = $('#container > .members');
    	
    		$(members).each(function(i, member) {
    			var contentDiv;
    			pageElem.append($('<div></div>').addClass('member')
    				.append(contentDiv = $('<div></div>')
    					.append($('<div>' + member['name'] + '</div>').addClass('name'))
    					.append($('<div>' + member['visits'] + ' visits</div>').addClass('visits'))
    				)
    			);
    			
    			if (member['websites']) {
    				var html = '';
    			
    				$.each(member['websites'], function(name, url) { 
    					var comma = html == '' ? '' : ', ';
    					html += comma + '<a href="' + url + '">' + name + '</a>'; 
    				});
    				
    				contentDiv.append($(html));
    			}
    		});
    	}
    	
    	var memberColumns = 0;
    	
    	function layoutMembers() {
    		var availableWidth = $('#container').innerWidth();
    		var totalMemberWidth = $($('#container > .members').children()[0]).outerWidth(true);
    
    		var nColumns = Math.floor(availableWidth / totalMemberWidth);
    		if (nColumns == memberColumns) {
    		    return;
    		}
    		
    		memberColumns = nColumns;
    		
    		var colHeights = [];
    		for (var i = 0; i < nColumns && i < 10; ++i) { colHeights[i] = 0; }
    		
    		$('#container > .members').children().each(function(i, e) {
    			e = $(e);
    			var col = indexOfMin(colHeights);
    			var top = colHeights[col];
    			var left = col * totalMemberWidth;
    			e.css({ 'margin-top': top, 'margin-left': left });
    			var totalMemberHeight = e.outerHeight(true) - parseInt(e.css('margin-top'), 10);
    			colHeights[col] += totalMemberHeight;
    		});
    	}
    	
    	function showEvents(pageId) {
    		var counterElem = $('#navigation > .' + pageId + ' .counter');
    		
    		$('#container > .' + pageId).children().each(function(i, eventElem) {
    			$(eventElem).css('opacity', '0').delay(TIME/2*(i/(i+1))).animate({ opacity: '1' }, TIME);
    			setTimeout(function() { counterElem.text(i+1); }, TIME/2*(i/(i+1)));
    		});
    	}
    	
    	function hideEvents(pageId, callback) {
    		$('#container > .' + pageId).children().each(function(i, event) {
    			$(event).delay(TIME/2*(i/(i+1))).animate({ opacity: '0' }, TIME/2);
    		});
    		
    		setTimeout(callback, TIME);
    	}
    	
    	function showMembers() {
    	    layoutMembers();
    	    
            var ePage = $('#container > .members');
            var eCounter = $('#navigation > .members .counter');
    
            ePage.children().each(function(i, eMember) {
                $(eMember).css('opacity', '0').delay(TIME/2*(i/(i+1))).animate({ opacity: '1' }, TIME);
                setTimeout(function() { eCounter.text(i+1); }, TIME/2*(i/(i+1)));
            });
    	}
        
        function hideMembers(callback) {
            $('#container > .members').children().each(function(i, member) {
                $(member).delay(TIME/2*(i/(i+1))).animate({ opacity: '0' }, TIME/2);
            });
            
            setTimeout(callback, TIME);
        }
    	
    	function showPage(pageId) {
    		var pageElem = $('#container > .' + pageId);
    		pageElem.css('opacity', '0').animate({ opacity: '1' }, TIME);
    	}
    	
    	function hidePage(pageId, callback) {
    		var pageElem = $('#container > .' + pageId);
    		pageElem.animate({ opacity: '0' }, TIME, callback);
    	}
    	
    	function navigate(target) {
    		var currentNavElem = $("#navigation > .current");
    		var currentContElem = $("#container > .current");
    			
    		var targetNavElem = $("#navigation > ." + target);
    		var targetContElem = $("#container > ." + target);
    
    		currentNavElem.removeClass('current');
    			
    		targetNavElem.addClass('current');
    		targetContElem.addClass('current').data('show')();
    
    		if (currentContElem.size() > 0) {
    			currentContElem.data('hide')(function() {
    				currentContElem.removeClass('current');
    			});
    		}
    	}
    	
    	function nop() {};
    	function id(fn) { fn(); };
    	function curry10(fn, arg0) { return function() { fn(arg0); } }
    	function curry01(fn) { return function(arg0) { fn(arg0); } }
    	function curry11(fn, arg0) { return function(arg1) { fn(arg0, arg1); } }
    
    	$(function() {
    	    /*
    		$("#container > .about")
    		.data('show', function() { showPage('about'); })
    		.data('hide', function(c) { hidePage('about', c); });
    		
    		$("#container > .members")
    		.data('show', function() { showMembers(); })
    		.data('hide', function(c) { hideMembers(c); });
    		
    		$("#container > .past")
    		.data('events', $(past))
    		.data('show', function() { showEvents('past'); })
    		.data('hide', function(c) { hideEvents('past', c); });
    		
    		$("#container > .future")
    		.data('events', $(future))
    		.data('show', function() { showEvents('future'); })
    		.data('hide', function(c) { hideEvents('future', c); });
    	
    		$('#navigation > .past .counter').text(past.length);
    		$('#navigation > .future .counter').text(future.length);
    	
    		$('#navigation > .about').click(function() { navigate('about'); });
    		$('#navigation > .past').click(function() { navigate('past'); });
    		$('#navigation > .future').click(function() { navigate('future'); });
    		$('#navigation > .members').click(function() { navigate('members'); });
    
    		navigate('members');
    		*/
    		
    		function createEventDiv(event) {
                var contentDiv, photosDiv;
                var eventDiv = $('<div></div>').addClass('event')
                    .append(contentDiv = $('<div></div>')
                        .append($('<div></div>').addClass('fadeout'))
                        .append($('<div></div>').addClass('bottom'))
                        .append($('<div>' + formatDate(event) + '</div>').addClass('date'))
                        .append($('<div>' + event['title'] + '</div>').addClass('title'))
                        .append(photosDiv = $('<div></div>').addClass('photos').hide())
                );
                
                if (event['description']) {
                    eventDiv.append($('<div>' + event['description'] + '</div>').addClass('description'));
                }
                
                if (event['photos']) {
                    $(event['photos']).each(function(i, url) { photosDiv.append($('<img src="' + url + '">')); });
                    photosDiv.show();
                }
                
                return eventDiv;
    		}

       		var ui = createUi()
                .addPage('about', $('#container > .about'), $('#navigation > .about'))
                .addPage('members', $('#container > .members'), $('#navigation > .members'))
                .addGridPage('past', $('#container > .past'), $('#navigation > .past .counter'), $('#navigation > .past'))
                .addGridPage('future', $('#container > .future'), $('#navigation > .future .counter'), $('#navigation > .future'));
                
            ui.getPage('past').generate(past, function(i, event) { return createEventDiv(event); });
            ui.getPage('future').generate(future, function(i, event) { return createEventDiv(event); });
                
            ui.startPage('past');
    	});
    </script>
</head>
<body>
    <h1><b>GDG</b> Kyiv-Center »</h1>
    <div id="navigation">
    	<span class="nav-item about"><span>About</span></span>
    	<span class="nav-item past"><span><span class="counter">?</span>&nbsp;past&nbsp;events</span></span>
    	<span class="nav-item members"><span><span class="counter">658</span>&nbsp;members</span></span>
    	<span class="nav-item future"><span><span class="counter">?</span>&nbsp;future&nbsp;events</span></span>
        <span class="nav-item spring"><span>&nbsp;</span></span>
    </div>
    <div id="container">
    	<div class="subcont about">
    		<p>З історії Kyiv GTUG Center
    		<p>2 грудня — онлайн-марафон “Ask Lars — online!”. Ларс відповів на питання у реальному часі та визначив авторів 5-х найкращіх  питань. Це були українські вейвери (наразі — члени Kyiv GTUG Center) Тимур Карімов та Катерина Чаукіна і росіяни Максим Васильєв, Володимир Шуляк та Міхаіл Дектярьов. Переможці та організатори марафону отримали 26 інвайтів на Хабрахабр. Текст марафону опубліковано Хабрахабром та ITC.UA, що стали інформаційними спонсорами події. Партнерами марафону була спільнота Google Wave Росія та десяткі вейверів
    		з усіх кінців світу.
    		<p>25-26 листопада — офлайн-марафон “Киів-Мельбурн” за участю Ларса Расмуссена. 25-го листопада відбулися перші у пострадянському просторі збори київської групи користувачів технологій Google — майбутньої Kyiv GTUG Center
    		<p>10-те листопада — участь у Google Developer Day 2009, Москва. Зустріч із керівниками проекту Google Wave Ларсом Расмуссеном і Стефані Хеннон. Ларс і Стефані демонструють 1500 учасникам GDD09ru хвилі, щойно створені “ветеранами песочниці”. Володимир Іванов домовляється з Ларсом про марафон за участю “отця-розробника” Google Wave. Зустріч із Стефані Лю — координатором програми GTUG переконала Володимира у необхідності організації GTUG у Києві.
    		Під час GDD09ru вейвери з Києва, Москви, Єкатеринбурга та Санкт-Петербурга провели веселий флешмоб “ПАНАЄХАЛІ” під гаслом “From Kyiv with Love!” біля кафе-шопу студії відомого веб-дизайнера Артемія Лєбєдєва. Артемію був надісланий інвайт на Хвилю.
    		<p>28-го Жовтня та 4-го листопада — два марафони “РАГУ.ЛІ” на Хвилях” із автором найпопулярнішого ресурсу UAнету — сайту Тетяни Микитенко “РАГУ.ЛІ”
    		<p>14-те жовтня — Перший Вейв-марафон із засновником спільноти Google Wave Россия Вадімом Барсуковим. Призами за кращі питання Марафону стали інвайти на Хвилю.
    		<p>Вересень-жовтень — “ветерани пісочниці” утворили віртуальний “ВейWер-Клуб”. Він провів купу транснаціональних акцій, найбільш відомими з яких стали Вейв-марафони.
    		<p>1 вересня — стартувала preview версія Google Wave. Олег Боженко знову випередив усіх, створивши “Першу українську хвилю”. Всі юзери “пісочниці” отримали інвайти на preview та  почали запрошувати нових вейверів. Тут знову у нагоді стали «Українські хWилі». Через блоґ потрапило до Хвилі багато українських ґіків.
    		<p>4 серпня — розпочато спільний проект Олега і Володимира — блоґ «Українські хWилі» Цей ресурс об’єднав «онвейвову» та «офвейвову» частини українських юзерів-прихільників новітньої технології Google Wave. Напочатку тількі тут і можна було прочитати перші враження від тестування Хвилі, отримати пораду, як потрапити до «пісочниці» і дізнатися найсвіжіші новини Google Wave
    		<p>2-4 серпня 2009 року — Олег Боженко і Володимир Іванов створили дві найперші україномовні хвилі у славетній «пісочниці»
    		<p>*«Пісочниця» https://wave.google.com/a/wavesandbox.com/ — девелоперський ресурс Google. Тут почалися тестування Google Wave на її ранніх стадіях і досі тривають розробки всіх роботів та ґаджетів для Хвилі.	</div>
    	<div class="subcont past"></div>
    	<div class="subcont members"></div>
    	<div class="subcont future"></div>
    </div>
</body>
</html>